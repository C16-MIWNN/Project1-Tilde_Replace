<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head th:replace="~{fragments/general :: baseheader(~{:: title})}">
    <title>Recepten beschrijven</title>
</head>
<body>

<div th:replace="~{fragments/general :: navbar}"></div>

<div class="container">
    <h4>Maak een nieuw recept aan</h4>


    <form th:action="@{/recipe/save}" method="post" th:object="${recipeForm}">

        <input type="hidden" th:field="*{id}" />

        <div class="mb-3">
            <label for="newReceptName" class="form-label">Recept naam</label>
            <input type="text" th:field="*{recipeName}" class="form-control" id="newReceptName"
                   placeholder="Geef het recept een naam">
        </div>
        <br>

        <div th:each="_, iteration : *{foodIds}">
            <label th:for="'food-' + ${iteration.index}">IngrediÃ«nt</label>
            <select th:id="'food-' + ${iteration.index}"
                    th:field="*{foodIds[__${iteration.index}__]}">
                <option th:each="food : ${allFoods}"
                        th:value="${food.foodId}"
                        th:text="${food.foodName}">
                </option>
            </select>

            <label th:for="'quantity-' + ${iteration.index}">Hoeveelheid</label>
            <input type="number"
                   th:id="'quantity-' + ${iteration.index}"
                   th:field="*{ingredientQuantities[__${iteration.index}__]}"
                   placeholder="Aantal" />

            <label th:for="'unit-' + ${iteration.index}">Eenheid</label>
            <select th:id="'unit-' + ${iteration.index}"
                    th:field="*{unitIds[__${iteration.index}__]}">
                <option th:each="unit : ${allUnits}"
                        th:value="${unit.unitId}"
                        th:text="${unit.unitName}">
                </option>
            </select>

            <hr/>
        </div>

        <div class="mb-3">
            <label for="recipePreparation" class="form-label">Bereiding beschrijving</label>
            <input type="text" th:field="*{preparationInstruction}" class="form-control" id="recipePreparation"
                   placeholder="Beschrijf de bereiding van het recept">
        </div>

        <input type="submit" value="Sla recept op"/>
    </form>
</div>

<div th:replace="~{fragments/general :: footer}"></div>
<div th:replace="~{fragments/general :: bottomScripts}"></div>

</body>
</html>